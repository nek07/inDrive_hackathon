# Документация проекта: indrive hackathon

## 1. Описание проекта

Проект позволяет загружать фотографии автомобилей, после чего искусственный интеллект анализирует их на:

* **Степень загрязнения** (классы: clean, super clean, slightly dirty, dirty, super dirty)
* **Повреждения** (Damage, Dent, Scratch) с указанием координат bounding box
  Результаты анализа отображаются на отдельной странице с визуализацией и статистикой.

---

## 2. Стек технологий

**Frontend:**

* React + TypeScript
* Vite (с TailwindCSS)
* Компоненты UI: карточки, прогресс-бары, кнопки, иконки Lucide

**Backend:**

* Django + DRF
* Python 3.10+
* OpenCV для обработки изображений
* YOLOv8 / кастомные модели для:

  * Определения степени загрязнения (`classifier`)
  * Обнаружения повреждений (`damage_model`)

**Дополнительно:**

* Ngrok для публичного тестирования локального сервера

---

## 3. Установка и запуск

### Backend

```bash
# Установка зависимостей
pip install -r requirements.txt

# Запуск сервера Django
python manage.py runserver
```

### Frontend

```bash
# Установка зависимостей
npm install

# Запуск dev-сервера
npm run dev
```

---

## 4. API

### POST `/check-cars/`

**Описание:** Принимает до 4 изображений (`image1`, `image2`, `image3`, `image4`) и возвращает анализ.

**Пример запроса:** `multipart/form-data` с файлами `image1`, …

**Пример ответа:**

```json
{
  "image1": {
    "status": "dirty",
    "confidence": 0.74,
    "top_classes": [{"class": "dirty", "conf": 0.74}, ...],
    "width": 4000,
    "height": 2250,
    "inference_time": 0.155,
    "url": "http://127.0.0.1:8000/media/dirty_cars/image1_dirty.jpg",
    "damage_url": "http://127.0.0.1:8000/media/damage_cars/image1_damage.jpg",
    "damage": [
      {"class": "Damage", "confidence": 0.41, "bbox": [2202,1044,2609,1284]}
    ],
    "summary": "Грязь: dirty; Повреждения: Damage"
  }
}
```

---

## 5. Frontend

* Страница загрузки фото (`/upload`)
* Страница результатов (`/results`) с:

  * Основной статистикой (точность, время, кол-во повреждений)
  * Карточками каждого изображения
  * Визуализацией исходного фото и выделенных повреждений
  * Подробными метриками и confidence модели
  * Кнопки: “Вернуться к загрузке”, “Оспорить результат”, “Экспорт результатов”

**Пример компонентов:**

* `<Card>` — карточка с изображением и данными
* `<Progress>` — визуализация уверенности модели
* `<Badge>` — отображение статуса загрязнения

---

## 6. Структура проекта

```
project/
│
├─ backend/
│  ├─ manage.py
│  ├─ inDrive/
│  │   ├─ settings.py
│  │   └─ urls.py
│  ├─ apps/
│  │   └─ cars/
│  │       ├─ views.py
│  │       └─ models.py
│  └─ media/
│      ├─ dirty_cars/
│      └─ damage_cars/
│
├─ frontend/
│  ├─ src/
│  │   ├─ pages/
│  │   │   ├─ UploadPage.tsx
│  │   │   └─ ResultsPage.tsx
│  │   ├─ components/
│  │   └─ api/
│  └─ vite.config.ts
```

---

## 7. Алгоритм работы

1. Пользователь загружает фотографии на фронтенде.
2. Фронтенд отправляет их на `/check-cars/` через `fetch`.
3. Django:

   * Считывает файлы
   * Передает их в модели AI:

     * `classifier` → определяет грязь
     * `damage_model` → распознает повреждения
   * Сохраняет обработанные изображения в `media/`
4. Ответ возвращается в JSON, фронтенд строит интерфейс результатов.

---

## 8. Рекомендации и дальнейшие улучшения

* Обработка больших изображений и оптимизация inference
* Поддержка batch-загрузки более 4 изображений
* Добавление истории анализов для пользователя
* Улучшение визуализации повреждений с overlay bbox на фото
* Настройка CORS для продакшн

---

## 9. Лицензии и ограничения

* Все модели и данные используются в учебных целях
* Данные пользователей не сохраняются без их согласия

---

